syntax = "proto3";
package routes;

option go_package = "./;routes";

enum ActionStatus {
  ACTION_STATUS_UNSPECIFIED         = 0;
  ACTION_STATUS_SUCCESS             = 1;
  ACTION_STATUS_FAILURE             = -1;
  ACTION_STATUS_NO_INTERRUPT_FAILURE = -2;
}

// Request mirrors the ROS request fields
message SetActionRequest {
  string action_id   = 1;
  uint32 duration_ms = 2;
  bool overwrite     = 3;
}

message SetActionResponse {
  ActionStatus error              = 1;
  string current_action_id        = 2;
  int32 remaining_ms              = 3;
}

message SetModeRequest {
  uint32 mode = 1;
}

message SetModeResponse {
  bool success = 1;
  string log   = 2;
}


message ActionPlaybackRequest {
  string action_id   = 1;
  float  duration_ms = 2; // ms
  float  delay_ms    = 3; // ms
}


message ActionPlaybackResponse {
  bool   success   = 1;
  string action_fb = 2;
}

service RobotActionInterface {
  rpc SetAction(SetActionRequest) returns (SetActionResponse);
  rpc SetMode(SetModeRequest) returns (SetModeResponse);
  rpc PlaybackAction(ActionPlaybackRequest) returns (ActionPlaybackResponse);
}

